{% extends "base.html.twig" %}
{% set menu_selected = 'cms_admin' %}
{% block title %}| CMS Admin - Letter Index{% endblock title %}
{% block breadcrumbs %}
    <li class='active'>Letter Index</li>    
    {% endblock breadcrumbs %}

{% block h1 %} 
    All letters
{% endblock h1 %}

{% block body %}

{#    <div id="retireTemplate" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-warning">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Retire Letter Template</h4>
                </div>
                <div class="modal-body" id="leadText">

                </div>
                <div class="modal-footer"><form class='form-horizontal' action="{{public_base}}Portal/CmsLetters/Retire">
                        <button type="button" class="btn btn-warning" data-dismiss="modal">No.</button>
                        <button type="button" class="btn btn-danger" id="retireNow" value="">Yes, do it now.</button>
                    </form>
                </div>
            </div>
        </div>
    </div> #}   

    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <ul class="nav navbar-nav">                
                <li class="button-li"><p class="navbar-btn"><a href="{{public_base}}Portal/CmsLetters/create" class="btn btn-success">Create New Template</a></p></li>
            </ul>
            <form class="navbar-form navbar-right" role="search">
                <input type="text" class="light-table-filter form-control" data-table="order-table" placeholder="Search for...">
            </form>
        </div>
    </nav>
    <table id="table" class="order-table table table-hover table-responsive">
        <thead>
            <tr>
                <th>Letter Template Name</th>
                <th>Template Type</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {% for template in data %}
                <tr>
                    <td>
                        <a href="{{public_base}}Portal/CmsLetters/view/{{template.id}}">{{ template.name }}</a>
                    </td>
                    <td>
                        <a class='btn btn-success pull-right' href='{{public_base}}Portal/CmsLetters/view/{{template.id}}'>Edit Template</a>
                        <a class='btn btn-success pull-right' href='{{public_base}}Portal/CmsLetters/viewPdf/{{template.id}}'>View PDF</a>
                    </td>
                    <td>
                        <button data-toggle="modal" data-target="#retireTemplate" data-template-name="{{template.name}}" data-template-id="{{template.id}}" type='button' class='btn btn-danger' value='{{template.id}}'>Retire <i class='fa fa-trash' aria-hidden='true'></i></button>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>     
{% endblock body %}

{% block extra_js %}
    {{ parent() }}
    <script src="{{asset_base}}js/audit/table-filter.js"></script>
    <script src="{{asset_base}}js/audit/table-pagination.js"></script>
    <script src="{{asset_base}}js/portal/retire-template-modal.js"></script>
{% endblock extra_js %}